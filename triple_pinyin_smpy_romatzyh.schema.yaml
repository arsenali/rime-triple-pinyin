# Rime schema
# encoding: utf-8

schema:
  schema_id: triple_pinyin_smpy_romatzyh
  name: ä¸‰ç æ‹¼éŸ³Â·å›½ç½—
  version: "1.2"
  author:
    - ä½›æŒ¯ <chen.sst@gmail.com>
    - é˜¿æ£®ç´è£¡ <15678407@qq.com>
  description: |
    15é”®å†…å®ç°â€œå£°æ¯+éŸµæ¯+å»é‡ç &å£°è°ƒâ€ä¸‰ç è¾“å…¥ä¸€ä¸ªå¸¦è°ƒéŸ³èŠ‚ï¼›
    åŸºç¡€éŸµæ¯å¤§è‡´æŒ‰éŸµå¤´åˆ†ä¸º4ç»„ï¼ša/an/ang,e/en/eng,o/ou/ong,ai/ei/aoï¼›
    i=iei,u=uao,v=vao,er=vaï¼›
    å›è½¦è¾“å…¥å›½è¯­ç½—é©¬å­—ã€‚
  dependencies:
    - luna_pinyin
    - stroke

switches:
  - name: ascii_mode
    reset: 0
    states: [ ä¸­æ–‡, è¥¿æ–‡ ]
    
  - name: full_shape
    states: [ åŠè§’, å…¨è§’ ]
    
  - name: simplification
    reset: 1
    states: [ ç¹é«”, ç®€ä½“ ]
    
  - name: ascii_punct
    states: [ ï¼Œã€‚, ï¼Œï¼ ]
    
  - options: [ VOICE_ASSIST1 ]
    states: [ "ğŸ™" ]
    
  - options: [ _Keyboard_emoji ]
    states: [ "ğŸ˜Š" ]
    
  - options: [ _Keyboard_symbols ]
    states: [ "ğŸ”£" ]
    
  - options: [ _Keyboard_clip ]
    states: [ "ğŸ“‹" ]
    
  - options: [ Menu ]
    states: [ "æ–¹æ¡ˆ" ]
    
  - options: [ Theme_settings ]
    states: [ "ä¸»é¢˜" ]
    
  - options: [ Color_switch ]
    states: [ "é…è‰²" ]
    
  - options: [ Hint_switch ]
    states: [ "åŠ©è®°" ]
    
  - options: [ IME_switch ]
    states: [ "ğŸŒ" ]

engine:
  processors:
    - ascii_composer
    - recognizer
    - key_binder
    - speller
    - punctuator
    - selector
    - navigator
    - express_editor  # ç·¨è¼¯å™¨
  segmentors:
    - ascii_segmentor
    - matcher
    - abc_segmentor
    - punct_segmentor
    - fallback_segmentor
  translators:
    - punct_translator
    - reverse_lookup_translator@luna_pinyin_lookup
    - reverse_lookup_translator@stroke_lookup
    - script_translator
  filters:
    - simplifier
    - uniquifier

speller:
  alphabet: 'zyxwvutsrqponmlkjihgfedcba'
  delimiter: " ;'"
  # auto_clear: auto # manual|auto|max_length ç©ºç¢¼æŒ‰ä¸‹ä¸€éµç¢ºèªæ¸…å±|ç©ºç¢¼è‡ªå‹•æ¸…å±|é”åˆ°æœ€é•·ç¢¼æ™‚å¾Œç¢¼é ‚ä¸Šæ¸…å±
  algebra:
   # éŸ³ç¯€ä¿®æ­£åˆä½µ
    - erase/^xx$/
    - xform/^m([1-5])$/mu$1/        # é¼»éŸ³mï¼ˆå‘£ï¼‰è½‰åŒ–çˆ²mu
    - xform/^r5$/er5/               # r5ï¼ˆå…’ï¼‰è½‰åŒ–çˆ²er5
    - xform/^eh([1-5])$/e$1/        # æ¨¡ç³ŠéŸ³ï¼šehï¼ˆèª’æ¬¸ï¼‰ã€eåˆä½µ
    - xform/^wong([1-5])$/weng$1/   # æ¨¡ç³ŠéŸ³ï¼šwongã€wengåˆä½µ
   # æ‹¼éŸ³å®Œæ•´å½¢å¼
    - xform/^([jqx])u/$1v/
    - xform/iu/iou/
    - xform/ui/uei/
    - xform/ong/ung/
    - xform/^yi?/i/
    - xform/^wu?/u/
    - xform/iu/v/
    - xform/([iuv])n/$1en/
   # ç•°æ‹¼
    - derive/^([jqx])?veng/$1iong/            # veng->iong
    - derive/^(\w|[zcs]h)ueng/$1ong/          # ueng->ong
   # å°–éŸ³è™•ç†
    - xform/^ziao([1-5])$/buong$1/
    - xform/^zii([1-5])$/buei$1/
    - xform/^zi(\w+[1-5])$/bu$1/
    - xform/^z(v\w*[1-5])$/b$1/
    - xform/^ciao([1-5])$/puong$1/
    - xform/^cii([1-5])$/puei$1/
    - xform/^ci(\w+[1-5])$/pu$1/
    - xform/^c(v\w*[1-5])$/p$1/
    - xform/^siao([1-5])$/muong$1/
    - xform/^sii([1-5])$/muei$1/
    - xform/^si(\w+[1-5])$/mu$1/
    - xform/^s(v\w*[1-5])$/m$1/
   # éŸ³ç¯€åˆä½µ
    - xform/^([zcs]h?|r)i([1-5])$/$1o$2/
    - xform/^([zcs])([aoe]\w*)([1-5])$/$1hi$2$3/
    - xform/^([zcs])u(an|eng?|ei|o)?([1-5])$/$1hv$2$3/
    - xform/^fiao([1-5])$/riao$1/
    - xform/^fu(eng)?([1-5])$/rv$1$2/
    - xform/^f(\w+)([1-5])$/ri$1$2/
    
   # ç¬¬1ç¢¼ï¼šè²æ¯
    - xform/^b/Q/
    - xform/^p/W/
    - xform/^m/E/
    - xform/^[fr]/R/
    - xform/^d/A/
    - xform/^t/S/
    - xform/^n/D/
    - xform/^l/F/
    - xform/^[gj]/Z/
    - xform/^[kq]/X/
    - xform/^[hx]/C/
    - xform/^([aoeiuv])/V$1/
    - xform/^zh?/T/
    - xform/^ch?/G/
    - xform/^sh?/B/
   # ç¬¬2ç¢¼ï¼šéŸ»æ¯
    - xform/^([QWERTASDFGZXCVB])(a|an|ang)([1-5])$/$1Q$2$3/
    - xform/^([QWERTASDFGZXCVB])(e|en|eng)([1-5])$/$1W$2$3/
    - xform/^([QWERTASDFGZXCVB])(o|ou|ong)([1-5])$/$1E$2$3/
    - xform/^([QWERTASDFGZXCVB])(ai|ei|ao)([1-5])$/$1R$2$3/
    
    - xform/^([QWERTASDFGZXCVB])(ia|ian|iang)([1-5])$/$1A$2$3/
    - xform/^([QWERTASDFGZXCVB])(ie|ien|ieng)([1-5])$/$1S$2$3/
    - xform/^([QWERTASDFGZXCVB])(io|iou|iong)([1-5])$/$1D$2$3/
    - xform/^([QWERTASDFGZXCVB])(iai|iei|iao|i)([1-5])$/$1F$2$3/
    
    - xform/^([QWERTASDFGZXCVB])(ua|uan|uang)([1-5])$/$1Z$2$3/
    - xform/^([QWERTASDFGZXCVB])(ue|uen|ueng)([1-5])$/$1X$2$3/
    - xform/^([QWERTASDFGZXCVB])(uo|uou|uong)([1-5])$/$1C$2$3/
    - xform/^([QWERTASDFGZXCVB])(uai|uei|uao|u)([1-5])$/$1V$2$3/
    
    - xform/^([QWERTASDFGZXCVB])(va|van|vang|er)([1-5])$/$1T$2$3/
    - xform/^([QWERTASDFGZXCVB])(ve|ven|veng)([1-5])$/$1G$2$3/
    - xform/^([QWERTASDFGZXCVB])(vo|vou|vong|vai|vei|vao|v)([1-5])$/$1B$2$3/
   # ç¬¬3ç¢¼ï¼šå»é‡ç¢¼&è²èª¿
    - xform/^([QWERTASDFGZXCVB]{2})([iuv]?[aeo]|[iuv]?ai|er)1$/$1Q/
    - xform/^([QWERTASDFGZXCVB]{2})([iuv]?[aeo]|[iuv]?ai|er)2$/$1W/
    - xform/^([QWERTASDFGZXCVB]{2})([iuv]?[aeo]|[iuv]?ai|er)3$/$1E/
    - xform/^([QWERTASDFGZXCVB]{2})([iuv]?[aeo]|[iuv]?ai|er)4$/$1R/
    - xform/^([QWERTASDFGZXCVB]{2})([iuv]?[aeo]|[iuv]?ai|er)5$/$1T/
    
    - xform/^([QWERTASDFGZXCVB]{2})([iuv]?[ae]n|[iuv]?ou|[iuv]?ei|i)1$/$1A/
    - xform/^([QWERTASDFGZXCVB]{2})([iuv]?[ae]n|[iuv]?ou|[iuv]?ei|i)2$/$1S/
    - xform/^([QWERTASDFGZXCVB]{2})([iuv]?[ae]n|[iuv]?ou|[iuv]?ei|i)3$/$1D/
    - xform/^([QWERTASDFGZXCVB]{2})([iuv]?[ae]n|[iuv]?ou|[iuv]?ei|i)4$/$1F/
    - xform/^([QWERTASDFGZXCVB]{2})([iuv]?[ae]n|[iuv]?ou|[iuv]?ei|i)5$/$1G/
    
    - xform/^([QWERTASDFGZXCVB]{2})([iuv]?[aeo]ng|[iuv]?ao|[uv])1$/$1Z/
    - xform/^([QWERTASDFGZXCVB]{2})([iuv]?[aeo]ng|[iuv]?ao|[uv])2$/$1X/
    - xform/^([QWERTASDFGZXCVB]{2})([iuv]?[aeo]ng|[iuv]?ao|[uv])3$/$1C/
    - xform/^([QWERTASDFGZXCVB]{2})([iuv]?[aeo]ng|[iuv]?ao|[uv])4$/$1V/
    - xform/^([QWERTASDFGZXCVB]{2})([iuv]?[aeo]ng|[iuv]?ao|[uv])5$/$1B/
    
    - erase/^[QWERTASDFGZXCVB][a-z]+/
    - xlit/QWERTYUIOPASDFGHJKLZXCVBNM/qwertyuiopasdfghjklzxcvbnm/
    - erase/^[yuiophjklnm]\w*/
    
   # ç°¡æ‹¼
    - derive/^t([qwertasdfgzxcvb]{2})$/y$1/
    - derive/^g([qwertasdfgzxcvb]{2})$/h$1/
    - derive/^b([qwertasdfgzxcvb]{2})$/n$1/
    - abbrev/^([qwertasdfgzxcvbyhn])[qwertasdfgzxcvb]{2}$/$1/     # é¦–ç¢¼ç°¡æ‹¼
    - derive/^([qwertasdfgzxcvbyhn])t([qwertasdfgzxcvb])$/$1y$2/
    - derive/^([qwertasdfgzxcvbyhn])g([qwertasdfgzxcvb])$/$1h$2/
    - derive/^([qwertasdfgzxcvbyhn])b([qwertasdfgzxcvb])$/$1n$2/
    - derive/^([qwertasdfgzxcvbyhn]{2})[qwertasdfgzxcvb]$/$1/     # å‰å…©ç¢¼ç°¡æ‹¼
    - derive/^([qwertasdfgzxcvbyhn]{2})[qwert]$/$1y/
    - derive/^([qwertasdfgzxcvbyhn]{2})[asdfg]$/$1h/
    - derive/^([qwertasdfgzxcvbyhn]{2})[zxcvb]$/$1n/

translator:
  dictionary: terra_pinyin
  prism: triple_pinyin_smpy_romatzyh
  spelling_hints: 5 # ï½å­—ä»¥å…§å€™é¸æ¨™è¨»å®Œæ•´å¸¶èª¿æ‹¼éŸ³
  preedit_format:
   # 1ï¼š  ä¸‰ç¢¼æ‹¼éŸ³è¼¸å…¥ç¢¼->æ•¸å­—æ¨™èª¿æ‹¼éŸ³
    - xform/\<q(\w*)/B$1/                                   # ç¬¬1ç¢¼ï¼šè²æ¯
    - xform/\<w(\w*)/P$1/
    - xform/\<e(\w*)/M$1/
    - xform/\<r(\w*)/R$1/
    - xform/\<a(\w*)/D$1/
    - xform/\<s(\w*)/T$1/
    - xform/\<d(\w*)/N$1/
    - xform/\<f(\w*)/L$1/
    - xform/\<z(\w*)/G$1/
    - xform/\<x(\w*)/K$1/
    - xform/\<c(\w*)/H$1/
    - xform/\<v(\w*)/Y$1/
    - xform/\<[ty](\w*)/Z$1/
    - xform/\<[gh](\w*)/C$1/
    - xform/\<[bn](\w*)/S$1/
    - xform/\<([BPMDTNLGKHYZCSR])(?!\w)\>/$1-/
    - xform/\<([BPMDTNLGKHYZCSR])q(\w|\>)/$1Q$2/         # ç¬¬2ç¢¼ï¼šéŸ»æ¯
    - xform/\<([BPMDTNLGKHYZCSR])w(\w|\>)/$1W$2/
    - xform/\<([BPMDTNLGKHYZCSR])e(\w|\>)/$1E$2/
    - xform/\<([BPMDTNLGKHYZCSR])r(\w|\>)/$1R$2/
    - xform/\<([BPMDTNLGKHYZCSR])a(\w|\>)/$1iA$2/
    - xform/\<([BPMDTNLGKHYZCSR])s(\w|\>)/$1iS$2/
    - xform/\<([BPMDTNLGKHYZCSR])d(\w|\>)/$1iD$2/
    - xform/\<([BPMDTNLGKHYZCSR])f(\w|\>)/$1iF$2/
    - xform/\<([BPMDTNLGKHYZCSR])z(\w|\>)/$1uZ$2/
    - xform/\<([BPMDTNLGKHYZCSR])x(\w|\>)/$1uX$2/
    - xform/\<([BPMDTNLGKHYZCSR])c(\w|\>)/$1uC$2/
    - xform/\<([BPMDTNLGKHYZCSR])v(\w|\>)/$1uV$2/
    - xform/\<([BPMDTNLGKHYZCSR])t(\w|\>)/$1vT$2/
    - xform/\<([BPMDTNLGKHYZCSR])y(\w|\>)/$1vY$2/
    - xform/\<([BPMDTNLGKHYZCSR])g(\w|\>)/$1vG$2/
    - xform/\<([BPMDTNLGKHYZCSR])h(\w|\>)/$1vH$2/
    - xform/\<([BPMDTNLGKHYZCSR])b(\w|\>)/$1vB$2/
    - xform/\<([BPMDTNLGKHYZCSR])n(\w|\>)/$1vN$2/
    - xform/\<([BPMDTNLGKHYZCSR])Q(?!\w)\>/$1a-/
    - xform/\<([BPMDTNLGKHYZCSR])iA(?!\w)\>/$1ia-/
    - xform/\<([BPMDTNLGKHYZCSR])uZ(?!\w)\>/$1ua-/
    - xform/\<([BPMDTNLGKHYZCSR])v[TY](?!\w)\>/$1va-/
    - xform/\<([BPMDTNLGKHYZCSR])W(?!\w)\>/$1e-/
    - xform/\<([BPMDTNLGKHYZCSR])iS(?!\w)\>/$1ie-/
    - xform/\<([BPMDTNLGKHYZCSR])uX(?!\w)\>/$1ue-/
    - xform/\<([BPMDTNLGKHYZCSR])v[GH](?!\w)\>/$1ve-/
    - xform/\<([BPMDTNLGKHYZCSR])E(?!\w)\>/$1o-/
    - xform/\<([BPMDTNLGKHYZCSR])iD(?!\w)\>/$1io-/
    - xform/\<([BPMDTNLGKHYZCSR])uC(?!\w)\>/$1uo-/
    - xform/\<([BPMDTNLGKHYZCSR])v[BN](?!\w)\>/$1vj-/
    - xform/\<([BPMDTNLGKHYZCSR])R(?!\w)\>/$1j-/
    - xform/\<([BPMDTNLGKHYZCSR])iF(?!\w)\>/$1ij-/
    - xform/\<([BPMDTNLGKHYZCSR])uV(?!\w)\>/$1uj-/
    - xform/\<([BPMDTNLGKHYZCSR])([iuv])?[QAZTY]q(?!-)\>/$1$2A\x31/     # ç¬¬3ç¢¼ï¼šå»é‡ç¢¼&è²èª¿
    - xform/\<([BPMDTNLGKHYZCSR])([iuv])?[QAZTY]w(?!-)\>/$1$2A\x32/
    - xform/\<([BPMDTNLGKHYZCSR])([iuv])?[QAZTY]e(?!-)\>/$1$2A\x33/
    - xform/\<([BPMDTNLGKHYZCSR])([iuv])?[QAZTY]r(?!-)\>/$1$2A\x34/
    - xform/\<([BPMDTNLGKHYZCSR])([iuv])?[QAZTY]t(?!-)\>/$1$2A\x35/
    - xform/\<([BPMDTNLGKHYZCSR])([iuv])?[QAZTY]y(?!-)\>/$1$2A\x30/
    - xform/\<YvA([0-5])\>/er$1/
    - xform/\<([BPMDTNLGKHYZCSR])([iuv])?[QAZTY]a(?!-)\>/$1$2AN\x31/
    - xform/\<([BPMDTNLGKHYZCSR])([iuv])?[QAZTY]s(?!-)\>/$1$2AN\x32/
    - xform/\<([BPMDTNLGKHYZCSR])([iuv])?[QAZTY]d(?!-)\>/$1$2AN\x33/
    - xform/\<([BPMDTNLGKHYZCSR])([iuv])?[QAZTY]f(?!-)\>/$1$2AN\x34/
    - xform/\<([BPMDTNLGKHYZCSR])([iuv])?[QAZTY]g(?!-)\>/$1$2AN\x35/
    - xform/\<([BPMDTNLGKHYZCSR])([iuv])?[QAZTY]h(?!-)\>/$1$2AN\x30/
    - xform/\<([ZCS])vAN([0-5])\>/$1uan$2/
    - xform/\<([BPMDTNLGKHYZCSR])([iuv])?[QAZTY]z(?!-)\>/$1$2ANG\x31/
    - xform/\<([BPMDTNLGKHYZCSR])([iuv])?[QAZTY]x(?!-)\>/$1$2ANG\x32/
    - xform/\<([BPMDTNLGKHYZCSR])([iuv])?[QAZTY]c(?!-)\>/$1$2ANG\x33/
    - xform/\<([BPMDTNLGKHYZCSR])([iuv])?[QAZTY]v(?!-)\>/$1$2ANG\x34/
    - xform/\<([BPMDTNLGKHYZCSR])([iuv])?[QAZTY]b(?!-)\>/$1$2ANG\x35/
    - xform/\<([BPMDTNLGKHYZCSR])([iuv])?[QAZTY]n(?!-)\>/$1$2ANG\x30/
    - xform/\<([BPMDTNLGKHYZCSR])([iuv])?[WSXGH]q(?!-)\>/$1$2E\x31/
    - xform/\<([BPMDTNLGKHYZCSR])([iuv])?[WSXGH]w(?!-)\>/$1$2E\x32/
    - xform/\<([BPMDTNLGKHYZCSR])([iuv])?[WSXGH]e(?!-)\>/$1$2E\x33/
    - xform/\<([BPMDTNLGKHYZCSR])([iuv])?[WSXGH]r(?!-)\>/$1$2E\x34/
    - xform/\<([BPMDTNLGKHYZCSR])([iuv])?[WSXGH]t(?!-)\>/$1$2E\x35/
    - xform/\<([BPMDTNLGKHYZCSR])([iuv])?[WSXGH]y(?!-)\>/$1$2E\x30/
    - xform/\<([BPMDTNLGKHYZCSR])([iuv])?[WSXGH]a(?!-)\>/$1$2EN\x31/
    - xform/\<([BPMDTNLGKHYZCSR])([iuv])?[WSXGH]s(?!-)\>/$1$2EN\x32/
    - xform/\<([BPMDTNLGKHYZCSR])([iuv])?[WSXGH]d(?!-)\>/$1$2EN\x33/
    - xform/\<([BPMDTNLGKHYZCSR])([iuv])?[WSXGH]f(?!-)\>/$1$2EN\x34/
    - xform/\<([BPMDTNLGKHYZCSR])([iuv])?[WSXGH]g(?!-)\>/$1$2EN\x35/
    - xform/\<([BPMDTNLGKHYZCSR])([iuv])?[WSXGH]s(?!-)\>/$1$2EN\x30/
    - xform/\<([ZCS])vEN([0-5])\>/$1uen$2/
    - xform/\<([BPMDTNLGKHYZCSR])([iuv])?[WSXGH]z(?!-)\>/$1$2ENG\x31/
    - xform/\<([BPMDTNLGKHYZCSR])([iuv])?[WSXGH]x(?!-)\>/$1$2ENG\x32/
    - xform/\<([BPMDTNLGKHYZCSR])([iuv])?[WSXGH]c(?!-)\>/$1$2ENG\x33/
    - xform/\<([BPMDTNLGKHYZCSR])([iuv])?[WSXGH]v(?!-)\>/$1$2ENG\x34/
    - xform/\<([BPMDTNLGKHYZCSR])([iuv])?[WSXGH]b(?!-)\>/$1$2ENG\x35/
    - xform/\<([BPMDTNLGKHYZCSR])([iuv])?[WSXGH]n(?!-)\>/$1$2ENG\x30/
    - xform/\<([ZCS])vENG([0-5])\>/$1ueng$2/
    - xform/\<([BPMDTNLGKHYZCSR])([iuv])?[EDCBN]q(?!-)\>/$1$2O\x31/
    - xform/\<([BPMDTNLGKHYZCSR])([iuv])?[EDCBN]w(?!-)\>/$1$2O\x32/
    - xform/\<([BPMDTNLGKHYZCSR])([iuv])?[EDCBN]e(?!-)\>/$1$2O\x33/
    - xform/\<([BPMDTNLGKHYZCSR])([iuv])?[EDCBN]r(?!-)\>/$1$2O\x34/
    - xform/\<([BPMDTNLGKHYZCSR])([iuv])?[EDCBN]t(?!-)\>/$1$2O\x35/
    - xform/\<([BPMDTNLGKHYZCSR])([iuv])?[EDCBN]y(?!-)\>/$1$2O\x30/
    - xform/\<([ZCS]i?|R)O([0-5])\>/$1I$2/
    - xform/\<([ZCS])vO([0-5])\>/$1uo$2/
    - xform/\<([BPMDTNLGKHYZCSR])([iuv])?[EDCBN]a(?!-)\>/$1$2OU\x31/
    - xform/\<([BPMDTNLGKHYZCSR])([iuv])?[EDCBN]s(?!-)\>/$1$2OU\x32/
    - xform/\<([BPMDTNLGKHYZCSR])([iuv])?[EDCBN]d(?!-)\>/$1$2OU\x33/
    - xform/\<([BPMDTNLGKHYZCSR])([iuv])?[EDCBN]f(?!-)\>/$1$2OU\x34/
    - xform/\<([BPMDTNLGKHYZCSR])([iuv])?[EDCBN]g(?!-)\>/$1$2OU\x35/
    - xform/\<([BPMDTNLGKHYZCSR])([iuv])?[EDCBN]h(?!-)\>/$1$2OU\x30/
    - xform/\<([BPMDTNLGKHYR])vOU([0-5])\>/$1vei$2/
    - xform/\<([ZCS])vOU([0-5])\>/$1uei$2/
    - xform/\<([BPMDTNLGKHYZCSR])([iuv])?[EDCBN]z(?!-)\>/$1$2ONG\x31/
    - xform/\<([BPMDTNLGKHYZCSR])([iuv])?[EDCBN]x(?!-)\>/$1$2ONG\x32/
    - xform/\<([BPMDTNLGKHYZCSR])([iuv])?[EDCBN]c(?!-)\>/$1$2ONG\x33/
    - xform/\<([BPMDTNLGKHYZCSR])([iuv])?[EDCBN]v(?!-)\>/$1$2ONG\x34/
    - xform/\<([BPMDTNLGKHYZCSR])([iuv])?[EDCBN]b(?!-)\>/$1$2ONG\x35/
    - xform/\<([BPMDTNLGKHYZCSR])([iuv])?[EDCBN]n(?!-)\>/$1$2ONG\x30/
    - xform/\<YONG([0-5])\>/wong$1/             # ç•°æ‹¼
    - xform/\<([BPMDTNLGKHYR])vONG([0-5])\>/$1V$2/
    - xform/\<([ZCS])vONG([0-5])\>/$1u$2/
    - xform/\<([BPMDTNLGKHYZCSR])([iuv])?[RFV]q(?!-)\>/$1$2AI\x31/
    - xform/\<([BPMDTNLGKHYZCSR])([iuv])?[RFV]w(?!-)\>/$1$2AI\x32/
    - xform/\<([BPMDTNLGKHYZCSR])([iuv])?[RFV]e(?!-)\>/$1$2AI\x33/
    - xform/\<([BPMDTNLGKHYZCSR])([iuv])?[RFV]r(?!-)\>/$1$2AI\x34/
    - xform/\<([BPMDTNLGKHYZCSR])([iuv])?[RFV]t(?!-)\>/$1$2AI\x35/
    - xform/\<([BPMDTNLGKHYZCSR])([iuv])?[RFV]y(?!-)\>/$1$2AI\x30/
    - xform/\<([BPMDTNLGKHYZCSR])([iuv])?[RFV]a(?!-)\>/$1$2EI\x31/
    - xform/\<([BPMDTNLGKHYZCSR])([iuv])?[RFV]s(?!-)\>/$1$2EI\x32/
    - xform/\<([BPMDTNLGKHYZCSR])([iuv])?[RFV]d(?!-)\>/$1$2EI\x33/
    - xform/\<([BPMDTNLGKHYZCSR])([iuv])?[RFV]f(?!-)\>/$1$2EI\x34/
    - xform/\<([BPMDTNLGKHYZCSR])([iuv])?[RFV]g(?!-)\>/$1$2EI\x35/
    - xform/\<([BPMDTNLGKHYZCSR])([iuv])?[RFV]h(?!-)\>/$1$2EI\x30/
    - xform/\<([BPMDTNLGKHY])iEI([0-5])\>/$1I$2/
    - xform/\<([BPMDTNLGKHYZCSR])([iuv])?[RFV]z(?!-)\>/$1$2AO\x31/
    - xform/\<([BPMDTNLGKHYZCSR])([iuv])?[RFV]x(?!-)\>/$1$2AO\x32/
    - xform/\<([BPMDTNLGKHYZCSR])([iuv])?[RFV]c(?!-)\>/$1$2AO\x33/
    - xform/\<([BPMDTNLGKHYZCSR])([iuv])?[RFV]v(?!-)\>/$1$2AO\x34/
    - xform/\<([BPMDTNLGKHYZCSR])([iuv])?[RFV]b(?!-)\>/$1$2AO\x35/
    - xform/\<([BPMDTNLGKHYZCSR])([iuv])?[RFV]n(?!-)\>/$1$2AO\x30/
    - xform/\<([BPMDTNLGKHYZCSR])uAO([0-5])\>/$1U$2/
    
    - xform/\<G([iv][A-Z]+|[IV])([0-5])\>/j$1$2/
    - xform/\<K([iv][A-Z]+|[IV])([0-5])\>/q$1$2/
    - xform/\<H([iv][A-Z]+|[IV])([0-5])\>/x$1$2/
    - xform/\<([ZCS])([AOEu][A-Z]+|[AOEIU])([0-5])\>/$1h$2$3/
    - xform/\<([ZCS])i([A-Z]+[0-5])\>/$1$2/
    - xform/\<RiAO([0-5])\>/fiao$1/
    - xform/\<RV(ENG)?([0-5])\>/fu$1$2/
    - xform/\<Ri([A-Z]+[0-5])\>/f$1/
    - xlit/QWERTYUIOPASDFGHJKLZXCVBNM/qwertyuiopasdfghjklzxcvbnm/
    - xform/\<(buong)([0-5])\>/ziao$2/                       # å°–éŸ³è™•ç†
    - xform/\<buei([0-5])\>/zii$1/
    - xform/\<bu(\w+[0-5])\>/zi$1/
    - xform/\<b(v\w*[0-5])\>/z$1/
    - xform/\<(puong)([0-5])\>/ciao$2/
    - xform/\<puei([0-5])\>/cii$1/
    - xform/\<pu(\w+[0-5])\>/ci$1/
    - xform/\<p(v\w*[0-5])\>/c$1/
    - xform/\<(muong)([0-5])\>/siao$2/
    - xform/\<muei([0-5])\>/sii$1/
    - xform/\<mu(\w+[0-5])\>/si$1/
    - xform/\<m(v\w*[0-5])\>/s$1/
    
    - xform/veng(?!\S*-)/iong/                                      # æ‹¼éŸ³å®Œæ•´å½¢å¼
    - xform/\<([jqx])v(?!\S*-)/$1u/
    - xform/\<y([aoe])(?!\S*-)/$1/
    - xform/([iuv])en(?!\S*-)/$1n/
    - xform/([^y])ung(?!\S*-)/$1ong/
    - xform/([^y])iou(?!\S*-)/$1iu/
    - xform/\<yi([aoe])(?!.*-)/y$1/
    - xform/uei(?!\S*-)/ui/
    - xform/\<yu([0-5])(?!\S*-)/wu$1/
    - xform/\<yu([aoe])(?!\S*-)/w$1/
    - xform/\<yu([in])(?!\S*-)/we$1/
    - xform/\<yv(?!\S*-)/yu/
    
   # 2.1ï¼šæ•¸å­—æ¨™èª¿æ‹¼éŸ³->å¸¶èª¿æ‹¼éŸ³ï¼ˆéš”éŸ³ç¬¦ã€ç°¡æ‹¼è™•ç†ï¼‰ï¼šæ¼¢èªæ‹¼éŸ³
    - xform/'/"/                                            # è¼¸å…¥çš„éš”éŸ³ç¬¦è™Ÿ'è®Šæ›ç‚º"
    - xform/ (\S+-)/ '$1/                                   # ç°¡æ‹¼å‰+éš”éŸ³ç¬¦
    - xform/- /-' /                                         # ç°¡æ‹¼å¾Œ+éš”éŸ³ç¬¦
    - xform/' '?/ '/
    - xform/\<g([iv][aeoj]-)/j$1/                                # å‰å…©ç¢¼ç°¡æ‹¼
    - xform/\<k([iv][aeoj]-)/q$1/
    - xform/\<h([iv][aeoj]-)/x$1/
    - xform/(?<![yzcsr])v([aej]-)/Ã¼$1/
    - xform/\<y([aeoj]-)/â€™$1/
    - xform/\<yu([aeoj]-)/w$1/
    - xform/\<([zcs])(u)?([aeoj]-)/$1h$2$3/
    - xform/\<([yzcs])i([aeoj]-)/$1$2/
    - xform/\<([yzcs])v([aej]-)/$1u$2/
    - xform/\<yua-/yur-/
    - xform/\<ri([aeoj]-)/f$1/
    - xform/\<rv([aej]-)/fu$1/
    - xform/j-/Î¹-/
    - xform/\<g-/g\x2Fj-/                                 # é¦–ç¢¼ç°¡æ‹¼
    - xform/\<k-/k\x2Fq-/
    - xform/\<h-/h\x2Fx-/
    - xform/\<y-/â€™\x2Fy\x2Fw-/
    - xform/\<([zcs])-/$1h\x2F$1-/
    - xform/\<r-/r\x2Ff-/
    
   # 2.2ï¼šæ•¸å­—æ¨™èª¿æ‹¼éŸ³->å¸¶èª¿æ‹¼éŸ³ï¼ˆå…¨ç¢¼è½‰æ›ï¼‰ï¼šåœ‹èªç¾…é¦¬å­—
    - xform/\<eh([0-5])\>/e$1/  # å–®éŸ»æ¯éŸ³ç¯€ehï¼ˆÃª/ã„ï¼‰çš„è™•ç†ï¼ˆæŒ‰ç…§ã€Šåœ‹èªç¾…é¦¬å­—æ‹¼éŸ³æ³•å¼ã€‹ç¬¬4é çš„è¦å®šï¼Œè¦–åŒeï¼‰
    
    - xform/\<([^mnlr]\w*)0\>/$1\x31/                       # æœªæ¨™èª¿è™•ç†
    - xform/\<([mnlr]\w+)0\>/$1\x32/
    
    - xform/\<([jqx])u/$1v/
    
    - xform/\<(\w*[^r][1234]) er5/$1L/                      # ç–Šè©è¦å‰‡
    - xform/\<(\w+[1-5] \w+[1-5]) \1( |\>)/$1 VX$2/
    - xform/\<(\w+[1-5]) (\w+[1-5]) \1( |\>)/$1 $2 V$3/
    - xform/\<(\w+[1-5]) \1( |\>)/$1 X$2/
    - xform/L/ er5/
    
    - xform/\<([mnlr])(\w+1) er5/$1h$2 er5/                 # å…’åŒ–éŸ³è™•ç†  # mnlréŸ»æ¯è½‰æ›
    - xform/\<([mnlr][^h]\w*)2 er5/$1\x31 er5/
    
    - xform/(zh|ch|sh|r|z|c|s)i1 er5/$1EL/
    - xform/(zh|ch|sh|r|z|c|s)i2 er5/$1ERL/
    - xform/(zh|ch|sh|r|z|c|s)i3 er5/$1EEL/
    - xform/(zh|ch|sh|r|z|c|s)i4 er5/$1ELL/
    
    - xform/(van|yuan)1 er5/IUAL/
    - xform/(van|yuan)2 er5/YUAL/
    - xform/(yuan)3 er5/YEUAL/
    - xform/(van)3 er5/EUAL/
    - xform/(yuan)4 er5/YUALL/
    - xform/(van)4 er5/IUALL/
    
    - xform/(vn|yun)1 er5/IUEL/
    - xform/(vn|yun)2 er5/YUEL/
    - xform/(ve|yue)1 er5/IUE'L/
    - xform/(ve|yue)2 er5/YUE'L/
    - xform/(yue|yun)3 er5/YEUEL/
    - xform/(ve|vn)3 er5/EUEL/
    - xform/(yue|yun)4 er5/YUELL/
    - xform/(ve|vn)4 er5/IUELL/
    
    - xform/(ua|uai|uan|wa|wai|wan)1 er5/UAL/
    - xform/(ua|uai|uan|wa|wai|wan)2 er5/WAL/
    - xform/(wa|wai|wan)3 er5/WOAL/
    - xform/(ua|uai|uan)3 er5/OAL/
    - xform/(wa|wai|wan)4 er5/WALL/
    - xform/(ua|uai|uan)4 er5/UAL/
    
    - xform/(uang|wang)1 er5/UANGL/
    - xform/(uang|wang)2 er5/WANGL/
    - xform/(wang)3 er5/WOANGL/
    - xform/(uang)3 er5/OANGL/
    - xform/(wang)4 er5/WANGL/
    - xform/(uang)4 er5/UANGL/
    
    - xform/(ui|un|wei|wen)1 er5/UEL/
    - xform/(ui|un|wei|wen)2 er5/WEL/
    - xform/(wei|wen)3 er5/WOEL/
    - xform/(ui|un)3 er5/OEL/
    - xform/(wei|wen)4 er5/WELL/
    - xform/(ui|un)4 er5/UELL/
    
    - xform/(weng)1 er5/UENGL/
    - xform/(weng)2 er5/WENGL/
    - xform/(weng)3 er5/WOENGL/
    - xform/(weng)4 er5/WENQL/
    
    - xform/(wong)1 er5/UONGL/
    - xform/(wong)2 er5/WONGL/
    - xform/(wong)3 er5/WOONGL/
    - xform/(wong)4 er5/WONQL/
    
    - xform/(uo|wo)1 er5/UOL/
    - xform/(uo|wo)2 er5/WOL/
    - xform/(wo)3 er5/WOOL/
    - xform/(uo)3 er5/UOOL/
    - xform/(wo)4 er5/WOLL/
    - xform/(uo)4 er5/UOLL/
    
    - xform/(ia|iai|ian|ya|yai|yan)1 er5/IAL/
    - xform/(ia|iai|ian|ya|yai|yan)2 er5/YAL/
    - xform/(ya|yai|yan)3 er5/YEAL/
    - xform/(ia|iai|ian)3 er5/EAL/
    - xform/(ya|yai|yan)4 er5/YALL/
    - xform/(ia|iai|ian)4 er5/IALL/
    
    - xform/(iao|yao)1 er5/IAUL/
    - xform/(iao|yao)2 er5/YAUL/
    - xform/(yao)3 er5/YEAUL/
    - xform/(iao)3 er5/EAUL/
    - xform/(yao)4 er5/YAWL/
    - xform/(iao)4 er5/IAWL/
    
    - xform/(iang|yang)1 er5/IANGL/
    - xform/(iang|yang)2 er5/YANGL/
    - xform/(yang)3 er5/YEANGL/
    - xform/(iang)3 er5/EANGL/
    - xform/(yang)4 er5/YANQL/
    - xform/(iang)4 er5/IANQL/
    
    - xform/(in|yin)1 er5/IEL/
    - xform/(in|yin)2 er5/YEL/
    - xform/(ie|ye)1 er5/IE'L/
    - xform/(ie|ye)2 er5/YE'L/
    - xform/(ye|yin)3 er5/YEEL/
    - xform/(ie|in)3 er5/IEEL/
    - xform/(ye|yin)4 er5/YELL/
    - xform/(ie|in)4 er5/IELL/
    
    - xform/(ing|ying)1 er5/IENGL/
    - xform/(ing|ying)2 er5/YENGL/
    - xform/(ying)3 er5/YEENGL/
    - xform/(ing)3 er5/IEENGL/
    - xform/(ying)4 er5/YENGL/
    - xform/(ing)4 er5/IENGL/
    
    - xform/(io|yo)1 er5/IOL/
    - xform/(io|yo)2 er5/YOL/
    - xform/(yo)3 er5/YEOL/
    - xform/(io)3 er5/EOL/
    - xform/(yo)4 er5/YOLL/
    - xform/(io)4 er5/IOLL/
    
    - xform/(iu|you)1 er5/IOUL/
    - xform/(iu|you)2 er5/YOUL/
    - xform/(you)3 er5/YEOUL/
    - xform/(iu)3 er5/EOUL/
    - xform/(you)4 er5/YOWL/
    - xform/(iu)4 er5/IOWL/
    
    - xform/(iong|yong)1 er5/IONGL/
    - xform/(iong|yong)2 er5/YONGL/
    - xform/(yong)3 er5/YEONGL/
    - xform/(iong)3 er5/EONGL/
    - xform/(yong)4 er5/YONQL/
    - xform/(iong)4 er5/IONQL/
    
    - xform/(a|ai|an)1 er5/AL/
    - xform/(a|ai|an)2 er5/ARL/
    - xform/(a|ai|an)3 er5/AAL/
    - xform/(a|ai|an)4 er5/ALL/
    
    - xform/(ao)1 er5/AUL/
    - xform/(ao)2 er5/AURL/
    - xform/(ao)3 er5/AOL/
    - xform/(ao)4 er5/AWL/
    
    - xform/(ang)1 er5/ANGL/
    - xform/(ang)2 er5/ARNGL/
    - xform/(ang)3 er5/AANGL/
    - xform/(ang)4 er5/ANQL/
    
    - xform/(ei|en)1 er5/EL/
    - xform/(e)1 er5/E'L/
    - xform/(ei|en)2 er5/ERL/
    - xform/(e)2 er5/ER'L/
    - xform/(ei|en)3 er5/EEL/
    - xform/(e)3 er5/EE'L/
    - xform/(ei|en)4 er5/ELL/
    - xform/(e)4 er5/EHL/
    
    - xform/(eng)1 er5/ENGL/
    - xform/(eng)2 er5/ERNGL/
    - xform/(eng)3 er5/EENGL/
    - xform/(eng)4 er5/ENQL/
    
    - xform/(o)1 er5/OL/
    - xform/(o)2 er5/ORL/
    - xform/(o)3 er5/OOL/
    - xform/(o)4 er5/OLL/
    
    - xform/(ou)1 er5/OUL/
    - xform/(ou)2 er5/OURL/
    - xform/(ou)3 er5/OOUL/
    - xform/(ou)4 er5/OWL/
    
    - xform/(ong)1 er5/ONGL/
    - xform/(ong)2 er5/ORNGL/
    - xform/(ong)3 er5/OONGL/
    - xform/(ong)4 er5/ONQL/
    
    - xform/(v|yu)1 er5/IUEL/
    - xform/(v|yu)2 er5/YUEL/
    - xform/(yu)3 er5/YEUEL/
    - xform/(v)3 er5/EUEL/
    - xform/(yu)4 er5/YUELL/
    - xform/(v)4 er5/IUELL/
    
    - xform/(u|wu)1 er5/UL/
    - xform/(u|wu)2 er5/WUL/
    - xform/(wu)3 er5/WUUL/
    - xform/(u)3 er5/UUL/
    - xform/(wu)4 er5/WULL/
    - xform/(u)4 er5/ULL/
    
    - xform/(i|ii|yi)1 er5/IEL/
    - xform/(i|ii|yi)2 er5/YEL/
    - xform/(yi)3 er5/YEEL/
    - xform/(i|ii)3 er5/IEEL/
    - xform/(yi)4 er5/YELL/
    - xform/(i|ii)4 er5/IELL/
    
    - xform/([zcsrh])i([1-5])\>/$1Y$2/                      # æ™®é€šéŸ³ç¯€è½‰æ›
    - xform/\<er(\w*[1-5])/el$1/
    - xform/\<zh(\w*[1-5])/j$1/
    - xform/\<z([aoeiuvyAOEIUVY]\w*[1-5])/tz$1/
    - xform/\<c([aoeiuvyAOEIUVY]\w*[1-5])/ts$1/
    - xform/\<q(\w*[1-5])/ch$1/
    - xform/\<x(\w*[1-5])/sh$1/
    - xform/iu([1-5])\>/iou$1/
    - xform/ui([1-5])\>/uei$1/
    - xform/ao([1-5])\>/au$1/
    - xform/([^y])un([1-5])\>/$1uen$2/
    - xform/v(\w*[1-5])/iu$1/
    - xform/\<wu([1-5])\>/u$1/
    - xform/y(\w*[1-5])/i$1/
    - xform/w(\w*[1-5])/u$1/
    - xform/ii(\w*[1-5])/i$1/
    - xform/\<([mnlr]\w+)2\>/$1/
    - xform/\<([mnlr])(\w+1)\>/$1h$2/
    - xform/1\>//
    - xform/i(\w+)2\>/y$1/
    - xform/u(\w+)2\>/w$1/
    - xform/(a|o|e)(i|u)2\>/$1$2r/
    - xform/(a|o|e)(|l|n|ng)2\>/$1r$2/
    - xform/i2\>/yi/
    - xform/u2\>/wu/
    - xform/\<ie3\>/yee/
    - xform/\<uo3\>/woo/
    - xform/\<i(\w*3)\>/yi$1/
    - xform/\<u(\w*3)\>/wu$1/
    - xform/i([aou]\w*)3\>/e$1/
    - xform/u([ae]\w*|ong)3\>/o$1/
    - xform/i(n|ng)3\>/ii$1/
    - xform/ie3\>/iee/
    - xform/uo3\>/uoo/
    - xform/ai3\>/ae/
    - xform/au3\>/ao/
    - xform/(a|o|e)(|i|l|u|n|ng)3\>/$1$1$2/
    - xform/i3\>/ii/
    - xform/u3\>/uu/
    - xform/\<i4\>/yih/
    - xform/\<iu4\>/yuh/
    - xform/\<u4\>/wuh/
    - xform/\<in4\>/yinn/
    - xform/\<ing4\>/yinq/
    - xform/\<i(\w+4)\>/y$1/
    - xform/\<u(\w+4)\>/w$1/
    - xform/(a|o|e)4\>/$1h/
    - xform/(a|o)u4\>/$1w/
    - xform/(a|e)i4\>/$1y/
    - xform/u4\>/uh/
    - xform/i4\>/ih/
    - xform/n4\>/nn/
    - xform/l4\>/ll/
    - xform/ng4\>/nq/
    - xform/Y\>/y/
    - xform/Y2\>/yr/
    - xform/Y3\>/yy/
    - xform/Y4\>/yh/
    - xform/Y5\>/yv/
    - xform/5\>/v/
    - xform/\<(\w+)v/Â·$1/                                   # è¼•è²
    
    - xlit/QWERTYUIOPASDFGHJKLZXCVBNM/qwertyuiopasdfghjklzxcvbnm/
    
    - xform/Â·ba\>/b/                                        # ç°¡å¯«ã€éš”éŸ³ç¬¦ç­‰
    - xform/Â·tzy\>/tz/
    - xform/Â·men\>/mn/
    - xform/Â·([mdj])e\>/$1/  # è‹¥éŸ»æ¯=eï¼Œå‰‡çœå»éŸ»æ¯
    - xform/Â·([nlg])e\>/Â·$1/
    - xform/(^|;)Â·([nlg])\>/$1$2/
    - xform/([^q']) ([aoeu])/$1 '$2/
    - xform/([aeiynl]) i/$1 'i/
    - xform/([gh]) w/$1 'w/
    - xform/([nlr]) h/$1 'h/
    - xform/([mbdjz]) '?/$1' /
    - xform/([mbdjz])' ([xv]\w?)([ ;']|$)/$1 $2$3/
    - xform/' ?Â·/Â·/                                         # éš”éŸ³ç¬¦ã€è¼•è²ç¬¦é€£å¯«æ™‚çœå»éš”éŸ³ç¬¦
    
   # 3ï¼š  å–æ¶ˆç©ºæ ¼ï¼šå–æ¶ˆç©ºæ ¼
    # - xform/(?<!-) '(?!\S*-)/ /         # å–æ¶ˆé›¶è²æ¯éŸ³ç¯€å‰çš„éš”éŸ³ç¬¦
    # - xform/([bpmfdtnljqxwzcs])-/$1/    # å–æ¶ˆé¦–ç¢¼ç°¡æ‹¼å¾Œçš„-
    - xform/ //                         # å–æ¶ˆç©ºæ ¼
    - xlit|;"| '|                       # æŠŠ;æ›¿æ›ç‚ºç©ºæ ¼ï¼Œæ¢å¾©è¼¸å…¥çš„éš”éŸ³ç¬¦è™Ÿ'

  comment_format:  # æç¤ºç¢¼çˆ²å¸¦è°ƒæ‹¼éŸ³
    - erase/^xx$/
    - xform/^m([1-5])$/mu$1/        # é¼»éŸ³mï¼ˆå‘£ï¼‰è½‰åŒ–çˆ²mu
    - xform/^r5$/er5/               # r5ï¼ˆå…’ï¼‰è½‰åŒ–çˆ²er5
    - xform/([aoeiuv])(ng?|r)([1-4])/$1$3$2
    - xform/([aoe])([iuo])([1-4])/$1$3$2
    - xform/a1/Ä
    - xform/a2/Ã¡
    - xform/a3/Ç
    - xform/a4/Ã 
    - xform/e1/Ä“
    - xform/e2/Ã©
    - xform/e3/Ä›
    - xform/e4/Ã¨
    - xform/o1/Å
    - xform/o2/Ã³
    - xform/o3/Ç’
    - xform/o4/Ã²
    - xform/i1/Ä«
    - xform/i2/Ã­
    - xform/i3/Ç
    - xform/i4/Ã¬
    - xform/u1/Å«
    - xform/u2/Ãº
    - xform/u3/Ç”
    - xform/u4/Ã¹
    - xform/v1/Ç–
    - xform/v2/Ç˜
    - xform/v3/Çš
    - xform/v4/Çœ
    - xform/eh1/ÃªÌ„
    - xform/eh2/áº¿
    - xform/eh3/ÃªÌŒ
    - xform/eh4/á»
    - xform/eh5?/Ãª
    - xform/([nlzcs])v/$1Ã¼/
    - xform/([jqxy])v/$1u/
    - xform/([a-z|Ã¼]+)[1-5]/$1/                            # æœªè™•ç†è²èª¿è½‰æ›

luna_pinyin_lookup:
  tag: luna_pinyin_lookup
  dictionary: luna_pinyin
  enable_completion: true
  prefix: "`"
  suffix: "'"
  tips: ã€”æ‹¼éŸ³åæŸ¥ã€•
  preedit_format:
    - xform/([nl])v/$1Ã¼/
    - xform/([nl])ue/$1Ã¼e/
    - xform/([jqxy])v/$1u/
  comment_format: &comment  # åæŸ¥æç¤ºç¢¼çˆ²ä¸‰ç¢¼æ‹¼éŸ³è¼¸å…¥ç¢¼
   # éŸ³ç¯€ä¿®æ­£åˆä½µ
    - erase/\<xx\>/
    - xform/\<m([1-5])\>/mu$1/        # é¼»éŸ³mï¼ˆå‘£ï¼‰è½‰åŒ–çˆ²mu
    - xform/\<r5\>/er5/               # r5ï¼ˆå…’ï¼‰è½‰åŒ–çˆ²er5
    - xform/\<eh([1-5])\>/e$1/        # æ¨¡ç³ŠéŸ³ï¼šehï¼ˆèª’æ¬¸ï¼‰ã€eåˆä½µ
    - xform/\<wong([1-5])\>/weng$1/   # æ¨¡ç³ŠéŸ³ï¼šwongã€wengåˆä½µ
   # æ‹¼éŸ³å®Œæ•´å½¢å¼
    - xform/\<([jqx])u/$1v/
    - xform/iu/iou/
    - xform/ui/uei/
    - xform/ong/ung/
    - xform/\<yi?/i/
    - xform/\<wu?/u/
    - xform/iu/v/
    - xform/([iuv])n/$1en/
   # ç•°æ‹¼
    - derive/\<([jqx])?veng/$1iong/            # veng->iong
    - derive/\<(\w|[zcs]h)ueng/$1ong/          # ueng->ong
   # å°–éŸ³è™•ç†
    - xform/\<ziao([1-5])\>/buong$1/
    - xform/\<zii([1-5])\>/buei$1/
    - xform/\<zi(\w+[1-5])\>/bu$1/
    - xform/\<z(v\w*[1-5])\>/b$1/
    - xform/\<ciao([1-5])\>/puong$1/
    - xform/\<cii([1-5])\>/puei$1/
    - xform/\<ci(\w+[1-5])\>/pu$1/
    - xform/\<c(v\w*[1-5])\>/p$1/
    - xform/\<siao([1-5])\>/muong$1/
    - xform/\<sii([1-5])\>/muei$1/
    - xform/\<si(\w+[1-5])\>/mu$1/
    - xform/\<s(v\w*[1-5])\>/m$1/
   # éŸ³ç¯€åˆä½µ
    - xform/\<([zcs]h?|r)i([1-5])\>/$1o$2/
    - xform/\<([zcs])([aoe]\w*)([1-5])\>/$1hi$2$3/
    - xform/\<([zcs])u(an|eng?|ei|o)?([1-5])\>/$1hv$2$3/
    - xform/\<fiao([1-5])\>/riao$1/
    - xform/\<fu(eng)?([1-5])\>/rv$1$2/
    - xform/\<f(\w+)([1-5])\>/ri$1$2/
    
   # ç¬¬1ç¢¼ï¼šè²æ¯
    - xform/\<b/Q/
    - xform/\<p/W/
    - xform/\<m/E/
    - xform/\<[fr]/R/
    - xform/\<d/A/
    - xform/\<t/S/
    - xform/\<n/D/
    - xform/\<l/F/
    - xform/\<[gj]/Z/
    - xform/\<[kq]/X/
    - xform/\<[hx]/C/
    - xform/\<([aoeiuv])/V$1/
    - xform/\<zh?/T/
    - xform/\<ch?/G/
    - xform/\<sh?/B/
   # ç¬¬2ç¢¼ï¼šéŸ»æ¯
    - xform/\<([QWERTASDFGZXCVB])(a|an|ang)([1-5])\>/$1Q$2$3/
    - xform/\<([QWERTASDFGZXCVB])(e|en|eng)([1-5])\>/$1W$2$3/
    - xform/\<([QWERTASDFGZXCVB])(o|ou|ong)([1-5])\>/$1E$2$3/
    - xform/\<([QWERTASDFGZXCVB])(ai|ei|ao)([1-5])\>/$1R$2$3/
    
    - xform/\<([QWERTASDFGZXCVB])(ia|ian|iang)([1-5])\>/$1A$2$3/
    - xform/\<([QWERTASDFGZXCVB])(ie|ien|ieng)([1-5])\>/$1S$2$3/
    - xform/\<([QWERTASDFGZXCVB])(io|iou|iong)([1-5])\>/$1D$2$3/
    - xform/\<([QWERTASDFGZXCVB])(iai|iei|iao|i)([1-5])\>/$1F$2$3/
    
    - xform/\<([QWERTASDFGZXCVB])(ua|uan|uang)([1-5])\>/$1Z$2$3/
    - xform/\<([QWERTASDFGZXCVB])(ue|uen|ueng)([1-5])\>/$1X$2$3/
    - xform/\<([QWERTASDFGZXCVB])(uo|uou|uong)([1-5])\>/$1C$2$3/
    - xform/\<([QWERTASDFGZXCVB])(uai|uei|uao|u)([1-5])\>/$1V$2$3/
    
    - xform/\<([QWERTASDFGZXCVB])(va|van|vang|er)([1-5])\>/$1T$2$3/
    - xform/\<([QWERTASDFGZXCVB])(ve|ven|veng)([1-5])\>/$1G$2$3/
    - xform/\<([QWERTASDFGZXCVB])(vo|vou|vong|vai|vei|vao|v)([1-5])\>/$1B$2$3/
   # ç¬¬3ç¢¼ï¼šå»é‡ç¢¼&è²èª¿
    - xform/\<([QWERTASDFGZXCVB]{2})([iuv]?[aeo]|[iuv]?ai|er)1\>/$1Q/
    - xform/\<([QWERTASDFGZXCVB]{2})([iuv]?[aeo]|[iuv]?ai|er)2\>/$1W/
    - xform/\<([QWERTASDFGZXCVB]{2})([iuv]?[aeo]|[iuv]?ai|er)3\>/$1E/
    - xform/\<([QWERTASDFGZXCVB]{2})([iuv]?[aeo]|[iuv]?ai|er)4\>/$1R/
    - xform/\<([QWERTASDFGZXCVB]{2})([iuv]?[aeo]|[iuv]?ai|er)5\>/$1T/
    
    - xform/\<([QWERTASDFGZXCVB]{2})([iuv]?[ae]n|[iuv]?ou|[iuv]?ei|i)1\>/$1A/
    - xform/\<([QWERTASDFGZXCVB]{2})([iuv]?[ae]n|[iuv]?ou|[iuv]?ei|i)2\>/$1S/
    - xform/\<([QWERTASDFGZXCVB]{2})([iuv]?[ae]n|[iuv]?ou|[iuv]?ei|i)3\>/$1D/
    - xform/\<([QWERTASDFGZXCVB]{2})([iuv]?[ae]n|[iuv]?ou|[iuv]?ei|i)4\>/$1F/
    - xform/\<([QWERTASDFGZXCVB]{2})([iuv]?[ae]n|[iuv]?ou|[iuv]?ei|i)5\>/$1G/
    
    - xform/\<([QWERTASDFGZXCVB]{2})([iuv]?[aeo]ng|[iuv]?ao|[uv])1\>/$1Z/
    - xform/\<([QWERTASDFGZXCVB]{2})([iuv]?[aeo]ng|[iuv]?ao|[uv])2\>/$1X/
    - xform/\<([QWERTASDFGZXCVB]{2})([iuv]?[aeo]ng|[iuv]?ao|[uv])3\>/$1C/
    - xform/\<([QWERTASDFGZXCVB]{2})([iuv]?[aeo]ng|[iuv]?ao|[uv])4\>/$1V/
    - xform/\<([QWERTASDFGZXCVB]{2})([iuv]?[aeo]ng|[iuv]?ao|[uv])5\>/$1B/
    
    - erase/\<[QWERTASDFGZXCVB][a-z]+/
    - xlit/QWERTYUIOPASDFGHJKLZXCVBNM/qwertyuiopasdfghjklzxcvbnm/
    - erase/\<[yuiophjklnm]\w*/
    
   # ç°¡æ‹¼
    # - derive/\<t([qwertasdfgzxcvb]{2})\>/y$1/
    # - derive/\<g([qwertasdfgzxcvb]{2})\>/h$1/
    # - derive/\<b([qwertasdfgzxcvb]{2})\>/n$1/
    # - abbrev/\<([qwertasdfgzxcvbyhn])[qwertasdfgzxcvb]{2}\>/$1/     # é¦–ç¢¼ç°¡æ‹¼
    # - derive/\<([qwertasdfgzxcvbyhn])t([qwertasdfgzxcvb])\>/$1y$2/
    # - derive/\<([qwertasdfgzxcvbyhn])g([qwertasdfgzxcvb])\>/$1h$2/
    # - derive/\<([qwertasdfgzxcvbyhn])b([qwertasdfgzxcvb])\>/$1n$2/
    # - derive/\<([qwertasdfgzxcvbyhn]{2})[qwertasdfgzxcvb]\>/$1/     # å‰å…©ç¢¼ç°¡æ‹¼
    # - derive/\<([qwertasdfgzxcvbyhn]{2})[qwert]\>/$1y/
    # - derive/\<([qwertasdfgzxcvbyhn]{2})[asdfg]\>/$1h/
    # - derive/\<([qwertasdfgzxcvbyhn]{2})[zxcvb]\>/$1n/
   # è®Šå½¢
    - xlit/qwertasdfgzxcvb/QWERTASDFGZXCVB/

stroke_lookup:
  tag: stroke_lookup
  dictionary: stroke
  enable_completion: true
  prefix: "~"
  suffix: "'"
  tips: ã€”ç¬”ç”»åæŸ¥ã€•
  preedit_format:
    - xlit/hspnz/ä¸€ä¸¨ä¸¿ä¸¶ä¹™/
  comment_format: *comment

punctuator:
  import_preset: symbols

key_binder:
  import_preset: default
  bindings:
    - { accept: Return, send: "Shift+Return", when: composing }
    - { accept: "Shift+Return", send: Return, when: composing }
    
    - { accept: minus, send: minus, when: has_menu }
    - { accept: minus, send: Page_Up, when: paging }
    # - { accept: minus, send: Page_Up, when: has_menu }
    # - { accept: equal, send: Page_Down, when: has_menu }
    
    - { accept: comma, send: comma, when: paging }
    # - { accept: comma, send: Page_Up, when: paging }
    - { accept: period, send: period, when: has_menu }
    # - { accept: period, send: Page_Down, when: has_menu }
    
    # - { accept: semicolon, send: 2, when: has_menu }
    # - { accept: apostrophe, send: 3, when: has_menu }
    
    - {accept: "Control+Shift+5", toggle: ascii_punct, when: always}
    - {accept: "Control+Shift+percent", toggle: ascii_punct, when: always}
    
    - {accept: "Control+Shift+F", toggle: simplification, when: always}

recognizer:
  import_preset: default
  patterns:
    email: "^[A-Za-z][-_.0-9A-Za-z]*@.*$"
    uppercase: "[A-Z][-_+.'0-9A-Za-z]*$"
    url: "^(www[.]|https?:|ftp[.:]|mailto:|file:).*$|^[a-z]+[.].+$"
    punct: '^/([0-9]0?|[A-Za-z]+)$'
    luna_pinyin_lookup: "`[a-z]*'?$"
    stroke_lookup: "~[a-z]*'?$"
